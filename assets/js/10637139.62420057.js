"use strict";(self.webpackChunkterranetes=self.webpackChunkterranetes||[]).push([["1485"],{6903:function(e,t,r){r.r(t),r.d(t,{metadata:()=>n,contentTitle:()=>s,default:()=>u,assets:()=>c,toc:()=>d,frontMatter:()=>a});var n=JSON.parse('{"id":"developer/drift","title":"Enabling Drift Protection","description":"Drift protection is a feature that enables the controller to perform periodic checks for discrepancies between the intended state and the actual state of resources in the upstream cloud provider. This is particularly useful in detecting changes made outside of the Terraform scope, such as through the cloud console or API. The frequency of these checks is determined by the platform team, and further information can be found in the Drift Detection documentation.","source":"@site/docs/terranetes-controller/developer/drift.md","sourceDirName":"developer","slug":"/developer/drift","permalink":"/terranetes-controller/developer/drift","draft":false,"unlisted":false,"editUrl":"https://github.com/appvia/terranetes/tree/master/docs/terranetes-controller/developer/drift.md","tags":[],"version":"current","lastUpdatedBy":"dependabot[bot]","lastUpdatedAt":1745161752000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Configuration Contexts","permalink":"/terranetes-controller/developer/contexts"},"next":{"title":"Using Flux as Source","permalink":"/terranetes-controller/developer/flux"}}'),o=r("5893"),i=r("65");let a={sidebar_position:3},s="Enabling Drift Protection",c={},d=[{value:"Enabling Drift Detection",id:"enabling-drift-detection",level:2}];function l(e){let t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"enabling-drift-protection",children:"Enabling Drift Protection"})}),"\n",(0,o.jsxs)(t.p,{children:["Drift protection is a feature that enables the controller to perform periodic checks for discrepancies between the intended state and the actual state of resources in the upstream cloud provider. This is particularly useful in detecting changes made outside of the Terraform scope, such as through the cloud console or API. The frequency of these checks is determined by the platform team, and further information can be found in the ",(0,o.jsx)(t.a,{href:"/terranetes-controller/admin/drift",children:"Drift Detection"})," documentation."]}),"\n",(0,o.jsx)(t.p,{children:"In the event that a configuration is identified as being out of sync, the status of the associated resource is updated, and a Kubernetes event is generated."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"$ kubectl -n apps get configurations.terraform.appvia.io\nNAME     MODULE                                                                            SECRET   ESTIMATED     SYNCHRONIZED   AGE\nbucket   https://github.com/terraform-aws-modules/terraform-aws-s3-bucket.git?ref=v3.1.0   test     Not Enabled   OutOfSync      3m5s\n"})}),"\n",(0,o.jsx)(t.h2,{id:"enabling-drift-detection",children:"Enabling Drift Detection"}),"\n",(0,o.jsxs)(t.p,{children:["To activate drift detection for a ",(0,o.jsx)(t.a,{href:"/terranetes-controller/reference/configurations.terraform.appvia.io",children:"Configuration"}),", set ",(0,o.jsx)(t.code,{children:"spec.enableDriftDetection"})," to ",(0,o.jsx)(t.code,{children:"true"}),"."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-yaml",children:"apiVersion: terraform.appvia.io/v1alpha1\nkind: Configuration\nmetadata:\n  name: bucket\nspec:\n  module: https://github.com/terraform-aws-modules/terraform-aws-s3-bucket.git?ref=v3.1.0\n  providerRef:\n    name: aws\n  # Drift protection can be enabled as follows\n  enableDriftDetection: true\n"})})]})}function u(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},65:function(e,t,r){r.d(t,{Z:function(){return s},a:function(){return a}});var n=r(7294);let o={},i=n.createContext(o);function a(e){let t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);