"use strict";(self.webpackChunkterranetes=self.webpackChunkterranetes||[]).push([[867],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>d});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(r),d=i,v=p["".concat(s,".").concat(d)]||p[d]||f[d]||o;return r?n.createElement(v,a(a({ref:t},u),{},{components:r})):n.createElement(v,a({ref:t},u))}));function d(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var c=2;c<o;c++)a[c]=r[c];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},496:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>f,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=r(7462),i=(r(7294),r(3905));const o={title:"tnctl verify revision"},a=void 0,l={unversionedId:"cli/tnctl_verify_revision",id:"cli/tnctl_verify_revision",title:"tnctl verify revision",description:"tnctl verify revision",source:"@site/docs/terranetes-controller/cli/tnctl_verify_revision.md",sourceDirName:"cli",slug:"/cli/tnctl_verify_revision",permalink:"/terranetes-controller/cli/tnctl_verify_revision",draft:!1,editUrl:"https://github.com/appvia/terranetes/tree/master/docs/terranetes-controller/cli/tnctl_verify_revision.md",tags:[],version:"current",lastUpdatedBy:"Rohith Jayawardene",lastUpdatedAt:1696672868,formattedLastUpdatedAt:"Oct 7, 2023",frontMatter:{title:"tnctl verify revision"},sidebar:"tutorialSidebar",previous:{title:"tnctl verify",permalink:"/terranetes-controller/cli/tnctl_verify"},next:{title:"tnctl workflow",permalink:"/terranetes-controller/cli/tnctl_workflow"}},s={},c=[{value:"tnctl verify revision",id:"tnctl-verify-revision",level:2},{value:"Synopsis",id:"synopsis",level:3},{value:"Options",id:"options",level:3},{value:"Options inherited from parent commands",id:"options-inherited-from-parent-commands",level:3},{value:"SEE ALSO",id:"see-also",level:3}],u={toc:c};function f(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"tnctl-verify-revision"},"tnctl verify revision"),(0,i.kt)("p",null,"Performs a series of checks against a Revision to ensure it is ready for use"),(0,i.kt)("h3",{id:"synopsis"},"Synopsis"),(0,i.kt)("p",null,"Performs a series of checks against the Revision to ensure the configuration is\nvalid and it will work with the within the cluster. This command uses the current\nkubeconfig context to retrieve details such as Provider/s, Policies and Contexts."),(0,i.kt)("p",null,"Verify the revision will work in the cluster\n$ tnctl verify revision revision.yaml"),(0,i.kt)("p",null,"We can also include additional files such as Contexts, Policies and Plans. This can\nbe useful if you want to test a revision against a specific context or policy, before\napplying it to the cluster.\n$ tnctl verify revision revision.yaml --source-dir /path/to/files"),(0,i.kt)("p",null,"When validating the module against the Checkov security policy, by default you\nscan the module rather than the terraform plan. While the module scan does pick\nmany issues some validation errors will only appear during the plan stage. You\nshould consider using the '--use-terraform-plan' flag. Note, this requires\nyou have the appropriate cloud credentials configured within your terminal\nenvironment.\n$ tnctl verify revision revision.yaml --use-terraform-plan"),(0,i.kt)("p",null,"To speed up multiple iterations of this command it's useful to use the --directory\nflag. This instructs the command to reuse the directory, rather then creating a\nan ephemeral one each time (and downloading, terraform provider, if --use-terraform-plan\nis enabled, and so forth). Note, the --directory flag will create files in the\ndirectory, so ensure there's no terraform files already there.\n$ tnctl verify revision revision.yaml --directory /path/to/directory"),(0,i.kt)("p",null,"Once verification has completed, you can continue to assure the Revision by running\nit against terraform itself\n$ tnctl convert revision revision.yaml | terraform plan -out plan.out"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"tnctl verify revision [OPTIONS] FILE [flags]\n")),(0,i.kt)("h3",{id:"options"},"Options"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"      --checkov-image string     The docker image of checkov to use when validating the security policy\n  -d, --directory string         Path to a directory to store temporary files\n  -h, --help                     help for revision\n  -s, --source-dir string        Path to a directory containing additional (or overrides) files i.e. Contexts, Policies, Plans etc\n      --terraform-image string   The docker image of terraform to use when generating a plan\n      --use-cluster              Indicates if we should retrieve configuration from the current kubeconfig (default true)\n      --use-terraform-plan       Indicates if we should use a terraform plan to verify the security policy\n")),(0,i.kt)("h3",{id:"options-inherited-from-parent-commands"},"Options inherited from parent commands"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'      --config string   Path to the configuration file (default "HOME/.tnctl.yaml")\n      --verbose         Enable verbose logging\n')),(0,i.kt)("h3",{id:"see-also"},"SEE ALSO"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"../tnctl_verify"},"tnctl verify"),"\t - Used to verify and validate resources")))}f.isMDXComponent=!0}}]);