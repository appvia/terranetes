"use strict";(self.webpackChunkterranetes=self.webpackChunkterranetes||[]).push([["8663"],{8779:function(e,n,t){t.r(n),t.d(n,{metadata:()=>r,contentTitle:()=>s,default:()=>h,assets:()=>l,toc:()=>c,frontMatter:()=>a});var r=JSON.parse('{"id":"developer/contexts","title":"Configuration Contexts","description":"Contexts serve as a mechanism for sharing common configuration inputs across Configurations within a cluster. This feature, introduced in version v0.3.25, enables the platform team to provision contexts that can be referenced by any Configuration for a more streamlined and efficient configuration management process.","source":"@site/docs/terranetes-controller/developer/contexts.md","sourceDirName":"developer","slug":"/developer/contexts","permalink":"/terranetes-controller/developer/contexts","draft":false,"unlisted":false,"editUrl":"https://github.com/appvia/terranetes/tree/master/docs/terranetes-controller/developer/contexts.md","tags":[],"version":"current","lastUpdatedBy":"Marcin Ciszak","lastUpdatedAt":1739381520000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Using Private Repositories","permalink":"/terranetes-controller/developer/private"},"next":{"title":"Enabling Drift Protection","permalink":"/terranetes-controller/developer/drift"}}'),i=t("5893"),o=t("65");let a={sidebar_position:3},s="Configuration Contexts",l={},c=[{value:"Viewing the Contexts",id:"viewing-the-contexts",level:2},{value:"Referencing Context Values",id:"referencing-context-values",level:2},{value:"Field Definitions",id:"field-definitions",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"configuration-contexts",children:"Configuration Contexts"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/contexts.terraform.appvia.io",children:"Contexts"})," serve as a mechanism for sharing common configuration inputs across ",(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/configurations.terraform.appvia.io",children:"Configurations"})," within a cluster. This feature, introduced in version v0.3.25, enables the platform team to provision contexts that can be referenced by any ",(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/configurations.terraform.appvia.io",children:"Configuration"})," for a more streamlined and efficient configuration management process."]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"This feature is only available from v0.3.25 onwards"})}),"\n",(0,i.jsx)(n.h2,{id:"viewing-the-contexts",children:"Viewing the Contexts"}),"\n",(0,i.jsxs)(n.p,{children:["To enumerate all available ",(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/contexts.terraform.appvia.io",children:"Contexts"}),", execute the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"$ kubectl get contexts\n"})}),"\n",(0,i.jsxs)(n.p,{children:["A Context is comprised of variables, each of which is defined by a ",(0,i.jsx)(n.code,{children:"description"})," and a ",(0,i.jsx)(n.code,{children:"value"}),", as outlined below;"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"---\napiVersion: terraform.appvia.io/v1alpha1\nkind: Context\nmetadata:\n  name: default\nspec:\n  #\n  ## All variables MUST follow the pattern of 'description' and 'value'. The\n  ## value can be any complex or simple type (boolean, int, map, object etc)\n  #\n  variables:\n    environment:\n      description: Is the environment your running in\n      value: dev\n    # Is the name of the variable\n    vpc_id:\n      # Provides a description to the consumer of the input\n      description: Is the network identifier we are residing\n      # The value of the value\n      value: vpc-1223133113\n    public_subnets_ids:\n      # Provides a description to the consumer of the input\n      description: |\n        Is a collection of subnet id's which are publicly available i.e.\n        they are attached to an internet gateway\n      # The value of the value\n      value:\n        - subnet-12312312312\n        - subnet-32332321312\n"})}),"\n",(0,i.jsx)(n.h2,{id:"referencing-context-values",children:"Referencing Context Values"}),"\n",(0,i.jsxs)(n.p,{children:["To reference a ",(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/contexts.terraform.appvia.io",children:"Context"})," value, utilize the ",(0,i.jsx)(n.code,{children:"spec.valueFrom"})," field within the ",(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/configurations.terraform.appvia.io",children:"Configuration"}),". This allows for the integration of context values into your configurations."]}),"\n",(0,i.jsx)(n.p,{children:"For example, when a module necessitates knowledge of the VPC ID, you can leverage this mechanism to inject the required information."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"  ---\n  apiVersion: terraform.appvia.io/v1alpha1\n  kind: Configuration\n  metadata:\n    name: bucket\n  spec:\n    module: https://github.com/terraform-aws-modules/terraform-aws-rds\n\n    providerRef:\n      name: aws\n    valueFrom:\n      - context: NAME_OF_CONTEXT  # Referenced context name\n        key: vpc                  # Name of the context key that holds the value\n        name: vpc_id              # Terraform module input variable name\n        optional: true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"field-definitions",children:"Field Definitions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"context"})," refers to the ",(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/contexts.terraform.appvia.io",children:"Context"})," resource name that is being referenced."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key"})," is the name of the variable within the ",(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/contexts.terraform.appvia.io",children:"Context"})," resource."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," is the identifier used to present the value to the terraform module. For instance, ",(0,i.jsx)(n.code,{children:"vpc_id"})," can be mapped to ",(0,i.jsx)(n.code,{children:"network_id"})," or ",(0,i.jsx)(n.code,{children:"vpc"})," in the module."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"optional"})," determines whether the value or ",(0,i.jsx)(n.a,{href:"/terranetes-controller/reference/contexts.terraform.appvia.io",children:"Context"})," needs to exist. If set to true, any missing value is ignored."]}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},65:function(e,n,t){t.d(n,{Z:function(){return s},a:function(){return a}});var r=t(7294);let i={},o=r.createContext(i);function a(e){let n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);