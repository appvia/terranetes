"use strict";(self.webpackChunkterranetes=self.webpackChunkterranetes||[]).push([["2483"],{6673:function(e,t,r){r.r(t),r.d(t,{metadata:()=>n,contentTitle:()=>a,default:()=>u,assets:()=>c,toc:()=>l,frontMatter:()=>i});var n=JSON.parse('{"id":"admin/secrets","title":"Additional Secrets","description":"The controller provides the capability to inject supplementary secrets into the Terraform execution process. This feature is particularly useful for supplying additional credentials, API tokens, or custom configurations to jobs.","source":"@site/docs/terranetes-controller/admin/secrets.md","sourceDirName":"admin","slug":"/admin/secrets","permalink":"/terranetes-controller/admin/secrets","draft":false,"unlisted":false,"editUrl":"https://github.com/appvia/terranetes/tree/master/docs/terranetes-controller/admin/secrets.md","tags":[],"version":"current","lastUpdatedBy":"dependabot[bot]","lastUpdatedAt":1745161829000,"sidebarPosition":100,"frontMatter":{"sidebar_position":100},"sidebar":"tutorialSidebar","previous":{"title":"Customize Job Template","permalink":"/terranetes-controller/admin/template"},"next":{"title":"Developer Docs","permalink":"/terranetes-controller/category/developer-docs"}}'),s=r("5893"),o=r("65");let i={sidebar_position:100},a="Additional Secrets",c={},l=[{value:"Adding a custom secret",id:"adding-a-custom-secret",level:2}];function d(e){let t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"additional-secrets",children:"Additional Secrets"})}),"\n",(0,s.jsx)(t.p,{children:"The controller provides the capability to inject supplementary secrets into the Terraform execution process. This feature is particularly useful for supplying additional credentials, API tokens, or custom configurations to jobs."}),"\n",(0,s.jsx)(t.p,{children:"It is essential for the platform team to create the necessary Kubernetes secrets in advance, which are then referenced on the controller's command line."}),"\n",(0,s.jsx)(t.admonition,{type:"warning",children:(0,s.jsxs)(t.p,{children:["It is crucial to exercise caution when utilizing this feature, as these secrets are applied to all jobs. The long-term goal is to integrate this feature with the ",(0,s.jsx)(t.a,{href:"/terranetes-controller/reference/providers.terraform.appvia.io",children:"Providers"})," CRD to achieve a more granular control."]})}),"\n",(0,s.jsx)(t.h2,{id:"adding-a-custom-secret",children:"Adding a custom secret"}),"\n",(0,s.jsxs)(t.p,{children:["To incorporate a custom secret, update your Helm chart values to include the following configuration. It is imperative that the secrets exist within the controller namespace and contain environment variables, ensuring that keys are uppercase, as they are sourced into jobs via the ",(0,s.jsx)(t.a,{href:"https://kubernetes.io/docs/concepts/configuration/secret/#use-case-as-container-environment-variables",children:"spec.envFrom"})," mechanism."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"controller:\n  # A collection of secret names existing within the controller namespace\n  executorSecrets:\n    - NAME\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Alternatively, if you are not utilizing the Helm chart, update the deployment to include the ",(0,s.jsx)(t.code,{children:"--executor-secret"})," flags."]})]})}function u(e={}){let{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},65:function(e,t,r){r.d(t,{Z:function(){return a},a:function(){return i}});var n=r(7294);let s={},o=n.createContext(s);function i(e){let t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);